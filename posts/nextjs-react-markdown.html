<!DOCTYPE html><html lang="en-US"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content=""/><meta name="og:title" content="Anthony Nguyen"/><meta name="twitter:card" content="summary_large_image"/><title>Migrating from remark-html to react-markdown</title><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/b7be950dba713bec.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b7be950dba713bec.css" data-n-g=""/><link rel="preload" href="/_next/static/css/37a4f086798c8e7a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/37a4f086798c8e7a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-7208cb52645282c2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-898c436b230de4c1.js" defer=""></script><script src="/_next/static/chunks/562-2410141583cd3bfb.js" defer=""></script><script src="/_next/static/chunks/345-2452ae39bb27f84b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-deede0109c93cdbf.js" defer=""></script><script src="/_next/static/jiG2VhEQ1mxFpkFumhhHC/_buildManifest.js" defer=""></script><script src="/_next/static/jiG2VhEQ1mxFpkFumhhHC/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout_container__fbLkO"><header class="layout_header__kY0Lt"></header><main><article><div class="article_articlehead__K415d"><h1 class="utils_headingXl__u25Y2">Migrating from remark-html to react-markdown</h1><div class="utils_lightText__eUzGY"><time dateTime="2022-08-30">August 30, 2022</time><br/><br/>Upgrading from remark-html to react-markdown for more secure HTML and customizable React components</div></div><div class="article_articlebody__lv6fy"><h1>The move to more customizable Markdown</h1>
<p>If you&#x27;re using the <code>remark-html</code> packages, you&#x27;ll notice that it is quite limited in its abilty to customize the resulting HTML. <code>remark-html</code> only compiles Markdown files into an HTML string with default HTML tags like <code>&lt;h1&gt;</code>, <code>&lt;p&gt;</code>, or <code>&lt;code&gt;</code>. Because it goes straight to a string, you&#x27;ll have to write code to parse the string in order to utilize custom React components if you do not wish to use the default HTML tags. With the default HTML tags, the customizability of rendered Markdown such as code blocks is quite limited and you can&#x27;t do complex things with a single <code>&lt;code&gt;</code> tag in CSS.</p>
<p>This is where <code>react-markdown</code> comes in. <code>react-markdown</code> converts a Markdown string into React elements instead of an HTML string. This way, you can specify your own React elements instead of the default HTML tags. This allows for much more customization of individual HTML elements such the ability to use a much more stylish code display complete with syntax highlighting via custom React components such as that from the <code>react-syntax-highlighter</code> NPM package.</p>
<p><code>react-markdown</code> also avoids the use of  the <code>dangerouslySetInnerHTML</code> feature in React which can potentially cause cross-site scripting (XSS) attacks if used improperly. The <code>dangerouslySetInnerHTML</code> function tells React to render an HTML string as actual HTML code without concern for security. <code>dangerouslySetInnerHTML</code> is required by <code>react-markdown</code>, because <code>react-markdown</code> outputs HTML code in a string.</p>
<h1>Installation and use</h1>
<p><code>react-markdown</code> is available in NPM and can easily be installed by running:</p>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="font-family:Fira Code;white-space:pre"><span class="token" style="color:#DD4A68">npm</span><span> </span><span class="token" style="color:#DD4A68">install</span><span> react-markdown</span></code></pre></pre>
<p>Afterwards, the code below is no longer used.</p>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="font-family:Fira Code;white-space:pre"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> remark </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;remark&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// some code</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> processedContent </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> </span><span class="token" style="color:#DD4A68">remark</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>
</span><span>  </span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">use</span><span class="token" style="color:#999">(</span><span>html</span><span class="token" style="color:#999">)</span><span>
</span><span>  </span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">process</span><span class="token" style="color:#999">(</span><span>matterResult</span><span class="token" style="color:#999">.</span><span class="token property-access">content</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> contentHtml </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> processedContent</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toString</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// some more code</span><span>
</span>
<span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">dangerouslySetInnerHTML</span><span class="token script language-javascript script-punctuation" style="color:#905">=</span><span class="token script language-javascript" style="color:#999">{</span><span class="token script language-javascript" style="color:#999">{</span><span class="token script language-javascript" style="color:#905"> </span><span class="token script language-javascript literal-property" style="color:#905">__html</span><span class="token script language-javascript" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token script language-javascript" style="color:#905"> postData</span><span class="token script language-javascript" style="color:#999">.</span><span class="token script language-javascript property-access" style="color:#905">contentHtml</span><span class="token script language-javascript" style="color:#905"> </span><span class="token script language-javascript" style="color:#999">}</span><span class="token script language-javascript" style="color:#999">}</span><span class="token" style="color:#905"> </span><span class="token" style="color:#999">/&gt;</span></code></pre></pre>
<p>Instead, we&#x27;ll use :</p>
<pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="font-family:Fira Code;white-space:pre"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">ReactMarkdown</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&#x27;react-markdown&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// some code</span><span>
</span>
<span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#DD4A68">ReactMarkdown</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">children</span><span class="token script language-javascript script-punctuation" style="color:#905">=</span><span class="token script language-javascript" style="color:#999">{</span><span class="token script language-javascript" style="color:#905">matterResult</span><span class="token script language-javascript" style="color:#999">.</span><span class="token script language-javascript property-access" style="color:#905">content</span><span class="token script language-javascript" style="color:#999">}</span><span class="token" style="color:#905"> </span><span class="token" style="color:#999">/&gt;</span></code></pre></pre>
<p>The rendered page should look exactly the same as before but now we have the ability to pass custom React elements to <code>ReactMarkdown</code> for a more customized page.</p></div></article></main><div class="layout_backToHome__9sjx_"><a href="/">Back to home</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"nextjs-react-markdown","contentMarkdown":"\r\n# The move to more customizable Markdown\r\n\r\nIf you're using the `remark-html` packages, you'll notice that it is quite limited in its abilty to customize the resulting HTML. `remark-html` only compiles Markdown files into an HTML string with default HTML tags like `\u003ch1\u003e`, `\u003cp\u003e`, or `\u003ccode\u003e`. Because it goes straight to a string, you'll have to write code to parse the string in order to utilize custom React components if you do not wish to use the default HTML tags. With the default HTML tags, the customizability of rendered Markdown such as code blocks is quite limited and you can't do complex things with a single `\u003ccode\u003e` tag in CSS.\r\n\r\nThis is where `react-markdown` comes in. `react-markdown` converts a Markdown string into React elements instead of an HTML string. This way, you can specify your own React elements instead of the default HTML tags. This allows for much more customization of individual HTML elements such the ability to use a much more stylish code display complete with syntax highlighting via custom React components such as that from the `react-syntax-highlighter` NPM package.\r\n\r\n`react-markdown` also avoids the use of  the `dangerouslySetInnerHTML` feature in React which can potentially cause cross-site scripting (XSS) attacks if used improperly. The `dangerouslySetInnerHTML` function tells React to render an HTML string as actual HTML code without concern for security. `dangerouslySetInnerHTML` is required by `react-markdown`, because `react-markdown` outputs HTML code in a string.\r\n\r\n# Installation and use\r\n\r\n`react-markdown` is available in NPM and can easily be installed by running: \r\n\r\n```bash\r\nnpm install react-markdown\r\n```\r\n\r\nAfterwards, the code below is no longer used. \r\n\r\n```jsx\r\nimport { remark } from 'remark';\r\n\r\n// some code\r\n\r\nconst processedContent = await remark()\r\n  .use(html)\r\n  .process(matterResult.content);\r\nconst contentHtml = processedContent.toString();\r\n\r\n// some more code\r\n\r\n\u003cdiv dangerouslySetInnerHTML={{ __html: postData.contentHtml }} /\u003e\r\n```\r\n\r\nInstead, we'll use : \r\n\r\n```jsx\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\n// some code\r\n\r\n\u003cReactMarkdown children={matterResult.content} /\u003e\r\n```\r\n\r\nThe rendered page should look exactly the same as before but now we have the ability to pass custom React elements to `ReactMarkdown` for a more customized page.","title":"Migrating from remark-html to react-markdown","description":"Upgrading from remark-html to react-markdown for more secure HTML and customizable React components","date":"2022-08-30","publish":true}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"nextjs-react-markdown"},"buildId":"jiG2VhEQ1mxFpkFumhhHC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>